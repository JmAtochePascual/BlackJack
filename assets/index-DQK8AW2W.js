(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();class P{constructor(){this.deck=[],this.playerCards=[],this.computerCards=[],this.playerPoints=0,this.computerPoints=0,this.maxPoint=21,this.winnerMessage="",this.computerShift=!1,this.loadDeck()}loadDeck(){this.createDeck(),this.shuffleDeck()}createDeck(){const r=["C","D","H","S"],n=["2","3","4","5","6","7","8","9","10","A","J","Q","K"];for(const o of n)for(const t of r)this.deck.push(o+t)}shuffleDeck(){this.deck=this.deck.sort(()=>.5-Math.random())}addCard(){const r=this.deck.pop();this.computerShift?this.computerCards=[...this.computerCards,r]:this.playerCards=[...this.playerCards,r],this.increasePoint(r)}increasePoint(r){this.computerShift?this.computerPoints+=+r.slice(0,-1)?Number(r.slice(0,-1)):10:this.playerPoints+=+r.slice(0,-1)?Number(r.slice(0,-1)):10}validateWinner(){if(this.playerPoints===this.computerPoints){this.winnerMessage="Empate";return}this.playerPoints>this.maxPoint||this.computerPoints>this.playerPoints&&this.computerPoints<=this.maxPoint?this.winnerMessage="Computer Winner":this.winnerMessage="Player Winner"}newGame(){this.deck=[],this.playerCards=[],this.computerCards=[],this.playerPoints=0,this.computerPoints=0,this.computerShift=!1,this.loadDeck()}}const C=document.querySelector("#btn-new-game"),a=document.querySelector("#btn-draw-card"),d=document.querySelector("#btn-stop"),l=document.querySelector("#player-points"),u=document.querySelector("#computer-point"),p=document.querySelector("#cards-player-container"),m=document.querySelector("#cards-computer-container"),e=new P,g=()=>{e.addCard(),f(),y(),e.playerPoints>=21&&h()},h=()=>{e.computerShift=!0,a.disabled=!0;do if(e.addCard(),f(),y(),e.playerPoints>e.maxPoint||e.playerPoints==e.computerPoints)break;while(e.computerPoints<e.playerPoints&&e.computerPoints<e.maxPoint);d.disabled=!0,e.validateWinner(),setTimeout(()=>{alert(e.winnerMessage)},100)},f=()=>{const i=document.createElement("img");i.src=`${e.computerShift?e.computerCards[e.computerCards.length-1]:e.playerCards[e.playerCards.length-1]}.png`,i.alt="imagen carta",i.classList.add("carta"),e.computerShift?m.appendChild(i):p.appendChild(i)},y=()=>e.computerShift?u.innerText=e.computerPoints:l.innerText=e.playerPoints,w=()=>{e.newGame(),a.disabled=!1,d.disabled=!1,l.innerText=0,u.innerText=0,m.innerText="",p.innerText=""};document.addEventListener("DOMContentLoaded",()=>{C.addEventListener("click",w),a.addEventListener("click",g),d.addEventListener("click",h)});
